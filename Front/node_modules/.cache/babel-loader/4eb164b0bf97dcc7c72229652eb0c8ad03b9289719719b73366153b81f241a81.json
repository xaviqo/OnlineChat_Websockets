{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mixins } from \"@/mixins\";\nimport { EventBus } from \"@/main\";\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nexport default {\n  mixins: [mixins],\n  name: \"ChatMessages\",\n  data: () => ({\n    myId: '',\n    messages: []\n  }),\n  created() {\n    this.myId = this.getUserId();\n    EventBus.$on('chatView_chatMessages_filterMessage', body => {\n      if (this.saveMessage(body.action)) this.messages.push(body);\n      this.filterMessage(body);\n      this.scrollChat();\n    });\n  },\n  methods: {\n    filterMessage(body) {\n      switch (body.action) {\n        case \"JOIN\":\n          if (body) EventBus.$emit('showAlert', {\n            color: \"green\",\n            type: \"info\",\n            msg: body.popMessage\n          });\n          break;\n        case \"LEAVE\":\n          EventBus.$emit('showAlert', {\n            color: \"green\",\n            type: \"info\",\n            msg: body.popMessage\n          });\n          break;\n      }\n    },\n    saveMessage(action) {\n      return [\"MESSAGE\", \"JOIN\", \"LEAVE\"].includes(action);\n    },\n    timeFromDate(date) {\n      return dayjs(date).fromNow();\n    },\n    scrollChat() {\n      const div = document.querySelector('.messagesContainer');\n      if (div.scrollTop < div.scrollHeight - div.clientHeight) div.scrollTop += 100; // move down\n    }\n  }\n};","map":{"version":3,"mappings":";AA8DA;AACA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACAC;IACAC;EACA;EACAC;IACA;IAEAC;MACA;MACA;MACA;IACA;EAEA;EACAC;IACAC;MACA;QACA;UACA,UACAF;YACAG;YACAC;YACAC;UACA;UACA;QACA;UACAL;YACAG;YACAC;YACAC;UACA;UACA;MAAA;IAGA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;AACA","names":["mixins","name","data","myId","messages","created","EventBus","methods","filterMessage","color","type","msg","saveMessage","timeFromDate","scrollChat"],"sourceRoot":"src/components/chat","sources":["ChatMessages.vue"],"sourcesContent":["<template>\n  <v-card\n      tile\n      elevation=\"0\"\n      class=\"messagesContainer pa-0 ma-0\"\n      height=\"84vh\"\n  >\n    <v-list>\n      <v-list-item three-line\n                   v-for=\"msg in messages\"\n                   :key=\"msg.uid\"\n      >\n        <v-list-item-content>\n          <v-card\n              max-width=\"35vw\"\n              :color=\"(myId === msg.senderId)?'blue':'grey'\"\n              dark\n              :class=\"(myId === msg.senderId)?'ml-auto':'mr-auto'\"\n          >\n            <v-list-item three-line>\n              <v-list-item-content>\n                <div class=\"mb-4\">\n                  <v-icon small class=\"mb-1 mr-2\">mdi-account</v-icon>\n                  <strong>{{ msg.senderNick }}</strong>\n                </div>\n                <p>\n                  {{ msg.msg }}\n                </p>\n                <v-list-item-subtitle class=\"mt-4\">\n                  <v-icon small class=\"mb-1 mr-2\">mdi-clock-outline</v-icon>\n                  {{ timeFromDate(msg.time).charAt(0).toUpperCase() + timeFromDate(msg.time).slice(1) }}\n                </v-list-item-subtitle>\n              </v-list-item-content>\n              <v-badge\n                  bordered\n                  bottom\n                  color=\"green\"\n                  dot\n                  offset-x=\"10\"\n                  offset-y=\"10\"\n                  class=\"chat-msg-badge\"\n              >\n                <v-avatar\n                    color=\"grey\"\n                    class=\"lighten-2\"\n                    size=\"50\">\n                  <v-img height=\"50\" :src=\"`https://avatars.dicebear.com/api/${msg.avatarUrl}/${msg.senderNick}.svg`\"></v-img>\n                </v-avatar>\n              </v-badge>\n            </v-list-item>\n          </v-card >\n        </v-list-item-content>\n      </v-list-item>\n    </v-list>\n  </v-card>\n</template>\n<style scoped>\n.messagesContainer{\n  overflow-y: auto !important;\n}\n</style>\n<script>\nimport { mixins } from \"@/mixins\";\nimport { EventBus } from \"@/main\";\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nexport default {\n  mixins: [mixins],\n  name: \"ChatMessages\",\n  data: () => ({\n    myId: '',\n    messages: []\n  }),\n  created() {\n    this.myId = this.getUserId();\n\n    EventBus.$on('chatView_chatMessages_filterMessage', body => {\n      if (this.saveMessage(body.action)) this.messages.push(body);\n      this.filterMessage(body);\n      this.scrollChat();\n    });\n\n  },\n  methods: {\n    filterMessage(body){\n      switch (body.action){\n        case  \"JOIN\":\n          if (body)\n          EventBus.$emit('showAlert', {\n            color: \"green\",\n            type: \"info\",\n            msg: body.popMessage\n          });\n          break;\n        case \"LEAVE\":\n          EventBus.$emit('showAlert', {\n            color: \"green\",\n            type: \"info\",\n            msg: body.popMessage\n          });\n          break;\n\n      }\n    },\n    saveMessage(action){\n      return [\"MESSAGE\",\"JOIN\",\"LEAVE\"].includes(action);\n    },\n    timeFromDate(date){\n      return dayjs(date).fromNow();\n    },\n    scrollChat() {\n      const div = document.querySelector('.messagesContainer');\n      if (div.scrollTop < div.scrollHeight - div.clientHeight) div.scrollTop += 100; // move down\n    },\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}